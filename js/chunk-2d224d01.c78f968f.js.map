{"version":3,"sources":["webpack:///./src/views/admin/News.vue","webpack:///./src/components/AddEditNews.vue","webpack:///./src/components/AddEditNews.vue?f828","webpack:///./src/views/admin/News.vue?f3a7"],"names":["class","scope","type","openModal","href","logOut","newsList","item","key","id","author","title","create_at","isPublic","checkDelete","ref","loading","loadingStatus","product","news","deleteNews","getNewsList","tabindex","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","for","disabled","selected","role","tempProduct","placeholder","content","true-value","false-value","updateProduct","props","data","status","modal","mounted","this","bootstrap","Modal","$refs","watch","methods","temp","api","method","$http","then","res","success","$emit","hideModal","alert","message","catch","err","console","log","show","hide","render","pagination","isNew","components","Addedit","Checkdele","document","cookie","$router","push","page","url","get","articles","delete","check","article"],"mappings":"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","file":"js/chunk-2d224d01.c78f968f.js","sourcesContent":["<template>\n  <section class=\"py-5 container d-flex flex-column justify-content-between\">\n    <div>\n      <!-- 右邊上方banner -->\n      <div class=\"d-flex justify-content-between align-items-center mb-3\">\n        <div class=\"d-flex align-items-center\">\n          <h2 class=\"me-4\">消息列表</h2>\n          <button type=\"button\" class=\"ms-5 btn btn-outline-dark\" @click=\"openModal(true)\">\n            <i class=\"fas fa-plus me-2 text-secondary\"></i>新增消息\n          </button>\n        </div>\n        <a href=\"#\" class=\"text-dark\" @click=\"logOut\"><i class=\"fas fa-sign-out-alt h2\"></i></a>\n      </div>\n      <!-- 下方內容 -->\n      <table class=\"table table-borderless table-hover\">\n        <thead>\n          <tr class=\"h4 border-bottom\">\n            <th scope=\"col\">分類</th>\n            <th scope=\"col\">標題</th>\n            <th scope=\"col\">日期</th>\n            <th scope=\"col\">顯示</th>\n            <th scope=\"col\">刪除</th>\n            <th scope=\"col\">修改</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr class=\"h4\" v-for=\"item in newsList\" :key=\"item.id\">\n            <td>{{ item.author }}</td>\n            <td>{{ item.title }}</td>\n            <td>{{ item.create_at }}</td>\n            <td v-if=\"item.isPublic\"><i class=\"far fa-check-square text-success h3\"></i></td>\n            <td v-else><i class=\"far fa-times-circle h3 text-warning\"></i></td>\n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger btn-sm\"\n                @click=\"checkDelete(item)\"\n              >\n                <i class=\"fas fa-trash-alt\"></i>\n              </button>\n            </td>\n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-secondary btn-sm\"\n                @click=\"openModal(false, item)\"\n              >\n                <i class=\"fas fa-pen\"></i>\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <!-- delete modal -->\n    <Checkdele\n      ref=\"check\"\n      :loading=\"loadingStatus\"\n      :product=\"news\"\n      @delete-product=\"deleteNews\"\n    ></Checkdele>\n    <!-- add&edit nodal -->\n    <Addedit ref=\"news\" :product=\"news\" @render=\"getNewsList\"></Addedit>\n    <!-- 分頁模組 -->\n  </section>\n</template>\n\n<script>\nimport Addedit from '@/components/AddEditNews.vue';\nimport Checkdele from '@/components/CheckDele.vue';\n\nexport default {\n  data() {\n    return {\n      loadingStatus: '',\n      newsList: [],\n      pagination: {},\n      news: {},\n      isNew: false,\n    };\n  },\n  components: {\n    Addedit,\n    Checkdele,\n  },\n  mounted() {\n    this.getNewsList();\n  },\n  methods: {\n    // 登出\n    logOut() {\n      document.cookie = 'hexToken=;expires=;';\n      this.$router.push('/');\n    },\n    // 取得文章列表\n    getNewsList(page = 1) {\n      const url = `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/admin/articles?page=${page}`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          if (res.data.success) {\n            this.newsList = res.data.articles;\n            this.pagination = res.data.pagination;\n          } else {\n            console.log(res);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    // 刪除文章\n    deleteNews(id) {\n      this.loadingStatus = id;\n      const url = `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/admin/article/${id}`;\n      this.$http.delete(url).then((res) => {\n        if (res.data.success) {\n          this.getNewsList();\n          this.loadingStatus = '';\n          this.$refs.check.hideModal();\n        }\n      });\n    },\n    // 確認刪除\n    checkDelete(item) {\n      this.news = item;\n      this.$refs.check.openModal();\n    },\n    // open-modal\n    openModal(isNew, item) {\n      this.isNew = isNew;\n      if (this.isNew) {\n        this.news = {};\n      } else {\n        const url = `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/admin/article/${item.id}`;\n        this.$http\n          .get(url)\n          .then((res) => {\n            if (res.data.success) {\n              this.news = res.data.article;\n            } else {\n              // eslint-disable-next-line no-alert\n              alert(res);\n            }\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n      }\n      this.$refs.news.openModal();\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    ref=\"modal\"\n    class=\"modal fade\"\n    tabindex=\"-1\"\n    aria-labelledby=\"productModalLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog modal-xl\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\">\n            <span>新增消息</span>\n            <span>編輯消息</span>\n          </h5>\n          <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-sm-8\">\n              <div class=\"form-group\">\n                <label for=\"title\">消息標題</label>\n                <input\n                  id=\"title\"\n                  v-model=\"tempProduct.title\"\n                  type=\"text\"\n                  class=\"form-control\"\n                  placeholder=\"請輸入標題\"\n                />\n              </div>\n\n              <div class=\"row\">\n                <div class=\"form-group col-md-6\">\n                  <label for=\"category\">消息分類</label>\n                  <select class=\"form-control\" v-model=\"tempProduct.author\">\n                    <option disabled selected>請選擇分類</option>\n                    <option>重要</option>\n                    <option>一般</option>\n                    <option>面試</option>\n                    <option>講義</option>\n                    <option>閒聊</option>\n                  </select>\n                </div>\n                <div class=\"form-group col-md-6\">\n                  <label for=\"date\">日期</label>\n                  <input\n                    id=\"date\"\n                    v-model.number=\"tempProduct.create_at\"\n                    type=\"date\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入日期\"\n                  />\n                </div>\n              </div>\n              <hr />\n              <div class=\"form-group\">\n                <label for=\"content\">文章內容</label>\n                <textarea\n                  id=\"content\"\n                  v-model=\"tempProduct.content\"\n                  type=\"text\"\n                  class=\"form-control\"\n                  placeholder=\"請輸入內容\"\n                >\n                </textarea>\n              </div>\n              <div class=\"form-group\">\n                <div class=\"form-check\">\n                  <input\n                    id=\"is_enabled\"\n                    v-model=\"tempProduct.isPublic\"\n                    class=\"form-check-input\"\n                    type=\"checkbox\"\n                    :true-value=true\n                    :false-value=false\n                  />\n                  <label class=\"form-check-label\" for=\"is_enabled\">是否啟用</label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <div class=\"text-center\" :class=\"{ 'd-none': loading == false }\">\n            <div class=\"spinner-border\" role=\"status\">\n              <span class=\"visually-hidden\">Loading...</span>\n            </div>\n          </div>\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-secondary\"\n            data-bs-dismiss=\"modal\"\n            :class=\"{ 'd-none': loading == true }\"\n          >\n            取消\n          </button>\n          <button\n            type=\"button\"\n            class=\"btn btn-primary\"\n            @click=\"updateProduct(tempProduct)\"\n            :class=\"{ 'd-none': loading == true }\"\n          >\n            確認\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['product'],\n  data() {\n    return {\n      tempProduct: {},\n      status: '',\n      modal: '',\n      loading: false,\n    };\n  },\n  mounted() {\n    // eslint-disable-next-line no-undef\n    this.modal = new bootstrap.Modal(this.$refs.modal);\n  },\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n    },\n    loading() {\n      this.status = this.loading;\n    },\n  },\n  methods: {\n    updateProduct(temp) {\n      this.loading = true;\n      let api = `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/admin/article`;\n      let method = 'post';\n      if (temp.id) {\n        api = `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/admin/article/${temp.id}`;\n        method = 'put';\n      }\n\n      this.$http[method](api, { data: temp })\n        .then((res) => {\n          if (res.data.success) {\n            this.$emit('render');\n            this.loading = false;\n            this.hideModal();\n          } else {\n            alert(res.data.message);\n            this.loading = false;\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    openModal() {\n      this.modal.show();\n    },\n    hideModal() {\n      this.modal.hide();\n    },\n  },\n};\n</script>\n","import { render } from \"./AddEditNews.vue?vue&type=template&id=31399233\"\nimport script from \"./AddEditNews.vue?vue&type=script&lang=js\"\nexport * from \"./AddEditNews.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./News.vue?vue&type=template&id=71a28694\"\nimport script from \"./News.vue?vue&type=script&lang=js\"\nexport * from \"./News.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}